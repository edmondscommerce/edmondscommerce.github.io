<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Edmonds Commerce Dev Blog</title>
  <meta name="author" content="EdmondsCommerce Development Team">

  
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://edmondscommerce.github.io/page/73">
  <link href="/favicon.png" type="image/png" rel="icon">
  <link href="/atom.xml" rel="alternate" title="Edmonds Commerce Dev Blog" type="application/atom+xml">

  <link href="/assets/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet" type="text/css">
<link href="/assets/bootstrap/dist/css/bootstrap-theme.min.css" rel="stylesheet" type="text/css">
<link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">


  <script src="/javascripts/libs/jquery/jquery-2.0.3.min.js"></script>
  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-27853727-2', 'edmondscommerce.github.io');
  ga('send', 'pageview');

</script>

</head>

  <body   >
    <div id="wrap">
      <header role="banner">
        <nav class="navbar navbar-default" role="navigation">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/"><img height="20" src="https://2.gravatar.com/avatar/04b807394911b26ea8a79dbe25ea4e1a?d=https%3A%2F%2Fidenticons.github.com%2Fccb745f4b144d30c4b883330a1114834.png&amp;r=x&amp;s=140" width="20"> Dev Blog</a>
        </div>

        <div class="navbar-collapse collapse">
            <ul class="nav navbar-nav">
                <li class="active">
                    <a href="/">Blog</a>
                </li>
                <li >
                    <a href="/blog/archives">Archives</a>
                </li>
                
                <li ><a href="/categories/index.html">Categories</a></li>
                
                <li ><a href="/contact-us/index.html">Contact</a></li>
                
            </ul>
            <ul class="nav pull-right">
                
                
                <li><a href="http://linkedin.com/in/edmondscommerce" title="Linkedin Profile"><i class="icon-linkedin-sign social-navbar"></i></a></li>
                
                
                
                <li><a href="http://plus.google.com/104488822194646220248" title="Google+ Profile"><i class="icon-google-plus-sign social-navbar"></i></a></li>
                
                
                
            </ul>
            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a class="subscribe-rss" href="/atom.xml" title="subscribe via RSS">
                        <span class="visible-xs">RSS</span>
                        <img class="hidden-xs" src="/images/rss.png" alt="RSS">
                    </a>
                </li>
                
            </ul>
            
                <form class="search navbar-form navbar-right" action="http://google.com/search" method="GET">
                    <input type="hidden" name="q" value="site:edmondscommerce.github.io">
                    <div class="form-group">
                        <input class="form-control" type="text" name="q" placeholder="Search">
                    </div>
                </form>
            
        </div>
    </div>
</nav>


      </header>
      <div id="main" class="container">
        <div id="content">
          <div class="row">
  <div class="page-content col-md-9">
    <div class="blog-index">
      
      
      
        <article class="post">
          
  <header class="page-header">
    
      <p class="meta text-muted text-uppercase">
        












<span class="glyphicon glyphicon-calendar"></span> <time datetime="2008-09-15T13:09:44+01:00" pubdate data-updated="true">Sep 15<span>th</span>, 2008</time>
        
      </p>
    
    
      <h1 class="entry-title"><a href="/security/securing-a-lamp-server-with-mod_security.html">Securing a LAMP Server With Mod_security</a></h1>
    
  </header>


  <div class="entry-content clearfix"><div class="oldpost"><h4>This is an old post. The information it contains is probably out of date or innacurate</h4>
<p>
This is a post that was written a long time ago and is only being kept here for posterity.
You should probably look up more recent blog posts related to the subject you are researching
</p>
</div>


<p>To get the highest possible level of server security and to protect yourself from things like XSS attacks, Edmonds Commerce highly recommend you get mod_security set up on your server.</p>

<p>If you ask your hosts they should be able to do this for you.</p>

<p>You can read all about mod_security <a href="http://www.modsecurity.org/">here</a>. If you would like any help getting mod_security set up on your server then simply get in touch.</p>

<p>One thing we always recommend doing to the standard mod_security configuration is to increase the maximum body size. This restriction by default limits the size of any web page to 500k.</p>

<p>For front end pages, there should never be a time when you need to display a page bigger than this size, however for some administration side systems, it is necessary to create very big pages. This mod_security limit will prevent these pages from being viewable.</p>

<p>To remedy this, you need to edit the file located in the modsecurity.d sub folder of your httpd folder (usually /etc/httpd/modsecurity.d/)</p>

<p>In this folder there is a collection of files which handle all of the various security rules that detect potential security threats. There is also a file called modsecurity_crs_10_config.conf.</p>

<p>Edit this file using vi and change the value for the SecResponseBodyLimit setting. We usually recommend upping this to 2mb from the standard .5mb. This means that the server is protected from doing really big things (for example a mysql dump) but is able to display really big admin side HTML pages.</p>

<p>To set it to 2mb you need to change the value of SecResponseBodyLimit to 2097152</p>
</div>
  
  


        </article>
      
      
        <article class="post">
          
  <header class="page-header">
    
      <p class="meta text-muted text-uppercase">
        












<span class="glyphicon glyphicon-calendar"></span> <time datetime="2008-09-10T14:30:04+01:00" pubdate data-updated="true">Sep 10<span>th</span>, 2008</time>
        
      </p>
    
    
      <h1 class="entry-title"><a href="/oscommerce/ecommerce/product%20catalogue/oscommerce-easypopulate-file-creator-class.html">osCommerce Easypopulate File Creator Class</a></h1>
    
  </header>


  <div class="entry-content clearfix"><div class="oldpost"><h4>This is an old post. The information it contains is probably out of date or innacurate</h4>
<p>
This is a post that was written a long time ago and is only being kept here for posterity.
You should probably look up more recent blog posts related to the subject you are researching
</p>
</div>


<p>When doing spidering projects or other bulk catalogue management projects for osCommerce sites, I tend to finish by creating easypopulate format files so that the store owner can do any last minute edits and upload the products manually using the easypopulate system.</p>

<p>Creating easypopulate format files can be a bit of a chore, especially as every site seems to be slightly different with different columns etc.</p>

<p>For this reason, I have created a very easy to use easypopulate file creation class. You can read more about the class <a href="http://www.phpclasses.org/browse/package/4782.htm">here</a>.</p>

<p>I have numerous clients who are now enjoying much, <i>much</i> easier management of their product catalogues including fully automated spidering systems that grab all details from supplier web sites and format it correctly to be uploaded to their store.</p>

<p>If you want to discuss ways that Edmonds Commerce can save you time and money whilst boosting your business &ndash; get in touch today!</p>
</div>
  
  


        </article>
      
      
        <article class="post">
          
  <header class="page-header">
    
      <p class="meta text-muted text-uppercase">
        












<span class="glyphicon glyphicon-calendar"></span> <time datetime="2008-08-13T15:32:05+01:00" pubdate data-updated="true">Aug 13<span>th</span>, 2008</time>
        
      </p>
    
    
      <h1 class="entry-title"><a href="/oscommerce/creloaded/creloaded-remove-google-ads.html">CRELoaded Remove Google Ads -</a></h1>
    
  </header>


  <div class="entry-content clearfix"><div class="oldpost"><h4>This is an old post. The information it contains is probably out of date or innacurate</h4>
<p>
This is a post that was written a long time ago and is only being kept here for posterity.
You should probably look up more recent blog posts related to the subject you are researching
</p>
</div>


<p>If you install the free version of CRELoaded, you will see that they have sneaked some Google adverts onto the bottom of your site.</p>

<p>Above the adverts will be the text</p>

<p><strong>This site is a member of the CRE Loaded Open Source Ecommerce Software community</strong></p>

<p>Bit of an underhand tactic but I suppose you have to try to make cash where you can these days&hellip;</p>

<p>I could go onto a big rant about how they are trying to make cash by simply repackaging software which was always meant to be given away freely and without hitches, including both osCommerce and the multitude of contributions they have added on there. I&rsquo;m not going to though. CRELoaded is a good product and these guys are keeping the osCommerce platform as a viable modern open source ecommerce platform.</p>

<p>Anyway &ndash; cut to the chase &ndash; to get rid of these annoying adverts all you have to do is open up</p>

<p>includes/javascript/cart_links.js.php</p>

<p>It should look like this:</p>

<figure class='code panel panel-default'><figcaption class='panel-heading'><h3 class='panel-title'></h3></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='php'><span class='line'><span class="o">&lt;?</span><span class="nx">php</span> <span class="k">if</span> <span class="p">(</span><span class="nv">$cart_links</span> <span class="o">==</span> <span class="s1">&#39;close&#39;</span><span class="p">){</span><span class="nv">$cart_link1</span><span class="o">=</span> <span class="s1">&#39;dothis&#39;</span><span class="p">;}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nv">$cart_links</span> <span class="o">==</span> <span class="s1">&#39;close&#39;</span><span class="p">)</span> <span class="p">{</span><span class="nv">$paymentclose</span> <span class="o">=</span> <span class="s1">&#39;true&#39;</span><span class="p">;}</span> <span class="k">if</span> <span class="p">(</span> <span class="nx">strstr</span><span class="p">(</span><span class="nb">basename</span><span class="p">(</span><span class="nv">$_SERVER</span><span class="p">[</span><span class="s1">&#39;SCRIPT_FILENAME&#39;</span><span class="p">]),</span><span class="s1">&#39;popup_&#39;</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">basename</span><span class="p">(</span><span class="nv">$_SERVER</span><span class="p">[</span><span class="s1">&#39;SCRIPT_FILENAME&#39;</span><span class="p">]</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span><span class="o">@</span><span class="k">include</span><span class="p">(</span><span class="s1">&#39;http://www.creloaded.com/cre_google.js&#39;</span><span class="p">);}</span>
</span><span class='line'> <span class="cp">?&gt;</span><span class="x"></span>
</span></code></pre></td></tr></table></div></figure>


<p>and replace the entire contents with</p>

<figure class='code panel panel-default'><figcaption class='panel-heading'><h3 class='panel-title'></h3></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='php'><span class='line'><span class="o">&lt;?</span><span class="nx">php</span> <span class="k">if</span> <span class="p">(</span><span class="nv">$cart_links</span> <span class="o">==</span> <span class="s1">&#39;close&#39;</span><span class="p">){</span><span class="nv">$cart_link1</span><span class="o">=</span> <span class="s1">&#39;dothis&#39;</span><span class="p">;}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nv">$cart_links</span> <span class="o">==</span> <span class="s1">&#39;close&#39;</span><span class="p">)</span> <span class="p">{</span><span class="nv">$paymentclose</span> <span class="o">=</span> <span class="s1">&#39;true&#39;</span><span class="p">;}</span>
</span><span class='line'><span class="cm">/*</span>
</span><span class='line'><span class="cm"> if ( strstr(basename($_SERVER[&#39;SCRIPT_FILENAME&#39;]),&#39;popup_&#39;) != basename($_SERVER[&#39;SCRIPT_FILENAME&#39;] ) ) {@include(&#39;http://www.creloaded.com/cre_google.js&#39;);}</span>
</span><span class='line'><span class="cm"> */</span>
</span><span class='line'> <span class="cp">?&gt;</span><span class="x"></span>
</span></code></pre></td></tr></table></div></figure>


<p>That&rsquo;s it.</p>
</div>
  
  


        </article>
      
      
        <article class="post">
          
  <header class="page-header">
    
      <p class="meta text-muted text-uppercase">
        












<span class="glyphicon glyphicon-calendar"></span> <time datetime="2008-08-12T11:20:42+01:00" pubdate data-updated="true">Aug 12<span>th</span>, 2008</time>
        
      </p>
    
    
      <h1 class="entry-title"><a href="/icecat/icecat-integration-with-oscommerce-magento-etc.html">ICECat Integration With osCommerce, Magento Etc</a></h1>
    
  </header>


  <div class="entry-content clearfix"><div class="oldpost"><h4>This is an old post. The information it contains is probably out of date or innacurate</h4>
<p>
This is a post that was written a long time ago and is only being kept here for posterity.
You should probably look up more recent blog posts related to the subject you are researching
</p>
</div>


<p>The ICECat database is an invaluable resource for webmasters who have to deal with very large catalogues. They offer a single source with a normalised structure for getting high quality images, descriptions and even PDF files about the products you sell.</p>

<p>They have developed relationships with a large number of manufacturers and brands which allow them to offer these details free of charge. If however you want better coverage they also offer a very reasonably priced service which is comparable to the CNET system but at a much reduced price.</p>

<p>Edmonds Commerce have the resources to implement a proper XML integration with the ICECat system for your ecommerce store. We especially specialse in the highly popular open source ecommerce platforms osCommerce and Magento.</p>

<p>If you would like to discuss the benefits of an ICECat integration please do not hesitate to get in touch.</p>
</div>
  
  


        </article>
      
      
        <article class="post">
          
  <header class="page-header">
    
      <p class="meta text-muted text-uppercase">
        












<span class="glyphicon glyphicon-calendar"></span> <time datetime="2008-08-05T15:59:35+01:00" pubdate data-updated="true">Aug 5<span>th</span>, 2008</time>
        
      </p>
    
    
      <h1 class="entry-title"><a href="/php/ecommerce/magento/magento-uk.html">Magento UK</a></h1>
    
  </header>


  <div class="entry-content clearfix"><div class="oldpost"><h4>This is an old post. The information it contains is probably out of date or innacurate</h4>
<p>
This is a post that was written a long time ago and is only being kept here for posterity.
You should probably look up more recent blog posts related to the subject you are researching
</p>
</div>


<p>Edmonds Commerce specialise in <strong>Magento Ecommerce</strong> and are available for <strong>Freelance Magento</strong> projects and installations. If you are looking to set up a new ecommerce venture and are considering using Magento &ndash; get in touch today.</p>

<p>Magento is certainly making waves. For those of you who haven&rsquo;t heard of it, Magento is looking likely to become the successor to osCommerce as the most popular open source ecommerce platform.</p>

<p>There are many things which make Magento a much better option than osCommerce. However for some people the tried and tested, &lsquo;better the devil you know&rsquo;, huge knowledge, customisation and support base of osCommerceÂ  makes it the platform they would still prefer to put their development investment into.</p>

<p>These justifications are valid to a point, however I now believe that the time is right to move into Magento and whilst I am not certain that it is worth worrying about upgrading if you already have a perfectly functional osCommerce site, I would recommend anyone looking to set up a new ecommerce site takes a close look at Magento.</p>
</div>
  
  


        </article>
      
      
        <article class="post">
          
  <header class="page-header">
    
      <p class="meta text-muted text-uppercase">
        












<span class="glyphicon glyphicon-calendar"></span> <time datetime="2008-08-04T14:52:51+01:00" pubdate data-updated="true">Aug 4<span>th</span>, 2008</time>
        
      </p>
    
    
      <h1 class="entry-title"><a href="/php/php-cached-download-function.html">PHP Cached Download Function</a></h1>
    
  </header>


  <div class="entry-content clearfix"><div class="oldpost"><h4>This is an old post. The information it contains is probably out of date or innacurate</h4>
<p>
This is a post that was written a long time ago and is only being kept here for posterity.
You should probably look up more recent blog posts related to the subject you are researching
</p>
</div>


<p>If you are coding a PHP script to deal with big files, it makes sense to build in some kind of caching logic so that your script won&rsquo;t download the same file every single time it is run, but will check to see how long ago it last downloaded that file and only download it again if it is more than a certain timeframe old.</p>

<p>This function allows you to do exactly that &ndash; check it out:</p>

<figure class='code panel panel-default'><figcaption class='panel-heading'><h3 class='panel-title'></h3></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
</pre></td><td class='code'><pre><code class='php'><span class='line'><span class="nv">$cache_days</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="nv">$cache_days</span> <span class="o">=</span> <span class="nv">$cache_days</span> <span class="o">*</span> <span class="p">(</span><span class="mi">24</span><span class="o">*</span><span class="mi">60</span><span class="o">*</span><span class="mi">60</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'><span class="k">function</span> <span class="nf">cached_download</span><span class="p">(</span><span class="nv">$remote</span><span class="p">,</span> <span class="nv">$local</span><span class="p">){</span>
</span><span class='line'><span class="nv">$cache_days</span> <span class="o">=</span> <span class="nv">$GLOBALS</span><span class="p">[</span><span class="s1">&#39;cache_days&#39;</span><span class="p">];</span>
</span><span class='line'><span class="k">if</span><span class="p">(</span><span class="nb">file_exists</span><span class="p">(</span><span class="nv">$local</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nb">filemtime</span><span class="p">(</span><span class="nv">$local</span><span class="p">)</span> <span class="o">&gt;</span> <span class="p">(</span><span class="nb">time</span><span class="p">()</span> <span class="o">-</span> <span class="nv">$cache_days</span><span class="p">))){</span>
</span><span class='line'><span class="c1">// we have a local copy that is less than $cache_days old</span>
</span><span class='line'><span class="k">echo</span> <span class="s1">&#39;</span>
</span><span class='line'><span class="s1">&lt;h3&gt;Using Cached - Last Downloaded &#39;</span> <span class="o">.</span> <span class="nb">date</span><span class="p">(</span><span class="s1">&#39;H:m:s d/m/Y&#39;</span><span class="p">,</span> <span class="nb">filemtime</span><span class="p">(</span><span class="nv">$local</span><span class="p">)</span> <span class="o">.</span> <span class="s1">&#39;&lt;/h3&gt;</span>
</span><span class='line'><span class="s1">&#39;</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span><span class="k">else</span><span class="p">{</span>
</span><span class='line'><span class="k">echo</span> <span class="s1">&#39;</span>
</span><span class='line'><span class="s1">&lt;h3&gt;Downloading Now...&lt;/h3&gt;</span>
</span><span class='line'><span class="s1">&#39;</span><span class="p">;</span>
</span><span class='line'><span class="nb">flush</span><span class="p">();</span>
</span><span class='line'><span class="nb">copy</span><span class="p">(</span><span class="nv">$remote</span><span class="p">,</span> <span class="nv">$local</span><span class="p">);</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>

</div>
  
  


        </article>
      
      
        <article class="post">
          
  <header class="page-header">
    
      <p class="meta text-muted text-uppercase">
        












<span class="glyphicon glyphicon-calendar"></span> <time datetime="2008-07-31T15:11:08+01:00" pubdate data-updated="true">Jul 31<span>st</span>, 2008</time>
        
      </p>
    
    
      <h1 class="entry-title"><a href="/php/php-recursive-create-path-if-not-exists.html">PHP: Recursive Create Path (if Not Exists)</a></h1>
    
  </header>


  <div class="entry-content clearfix"><div class="oldpost"><h4>This is an old post. The information it contains is probably out of date or innacurate</h4>
<p>
This is a post that was written a long time ago and is only being kept here for posterity.
You should probably look up more recent blog posts related to the subject you are researching
</p>
</div>


<p>Handling directories and files with PHP is a snap. However, with this handy function you can always be sure that the destination directory path for your files will exist.</p>

<p>If you pass a path with a filename at teh end, set the second parameter to true eg make_path($path, true)</p>

<figure class='code panel panel-default'><figcaption class='panel-heading'><h3 class='panel-title'></h3></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
</pre></td><td class='code'><pre><code class='php'><span class='line'><span class="cm">/*Create  Directory Tree if Not Exists</span>
</span><span class='line'><span class="cm">If you are passing a path with a filename on the end, pass true as the second parameter to snip it off */</span>
</span><span class='line'><span class="k">function</span> <span class="nf">make_path</span><span class="p">(</span><span class="nv">$pathname</span><span class="p">,</span> <span class="nv">$is_filename</span><span class="o">=</span><span class="k">false</span><span class="p">){</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">if</span><span class="p">(</span><span class="nv">$is_filename</span><span class="p">){</span>
</span><span class='line'>
</span><span class='line'>      <span class="nv">$pathname</span> <span class="o">=</span> <span class="nx">substr</span><span class="p">(</span><span class="nv">$pathname</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nb">strrpos</span><span class="p">(</span><span class="nv">$pathname</span><span class="p">,</span> <span class="s1">&#39;/&#39;</span><span class="p">));</span>
</span><span class='line'>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="c1">// Check if directory already exists</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">if</span> <span class="p">(</span><span class="nb">is_dir</span><span class="p">(</span><span class="nv">$pathname</span><span class="p">)</span> <span class="o">||</span> <span class="k">empty</span><span class="p">(</span><span class="nv">$pathname</span><span class="p">))</span> <span class="p">{</span>
</span><span class='line'>
</span><span class='line'>        <span class="k">return</span> <span class="k">true</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="c1">// Ensure a file does not already exist with the same name</span>
</span><span class='line'>
</span><span class='line'>    <span class="nv">$pathname</span> <span class="o">=</span> <span class="nb">str_replace</span><span class="p">(</span><span class="k">array</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">,</span> <span class="s1">&#39;\\&#39;</span><span class="p">),</span> <span class="nx">DIRECTORY_SEPARATOR</span><span class="p">,</span> <span class="nv">$pathname</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">if</span> <span class="p">(</span><span class="nb">is_file</span><span class="p">(</span><span class="nv">$pathname</span><span class="p">))</span> <span class="p">{</span>
</span><span class='line'>
</span><span class='line'>        <span class="nb">trigger_error</span><span class="p">(</span><span class="s1">&#39;mkdirr() File exists&#39;</span><span class="p">,</span> <span class="nx">E_USER_WARNING</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>        <span class="k">return</span> <span class="k">false</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="c1">// Crawl up the directory tree</span>
</span><span class='line'>
</span><span class='line'>    <span class="nv">$next_pathname</span> <span class="o">=</span> <span class="nx">substr</span><span class="p">(</span><span class="nv">$pathname</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nb">strrpos</span><span class="p">(</span><span class="nv">$pathname</span><span class="p">,</span> <span class="nx">DIRECTORY_SEPARATOR</span><span class="p">));</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">if</span> <span class="p">(</span><span class="nx">make_path</span><span class="p">(</span><span class="nv">$next_pathname</span><span class="p">,</span> <span class="nv">$mode</span><span class="p">))</span> <span class="p">{</span>
</span><span class='line'>
</span><span class='line'>        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nb">file_exists</span><span class="p">(</span><span class="nv">$pathname</span><span class="p">))</span> <span class="p">{</span>
</span><span class='line'>
</span><span class='line'>            <span class="k">return</span> <span class="nb">mkdir</span><span class="p">(</span><span class="nv">$pathname</span><span class="p">,</span> <span class="nv">$mode</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>        <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">return</span> <span class="k">false</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>

</div>
  
  


        </article>
      
      
        <article class="post">
          
  <header class="page-header">
    
      <p class="meta text-muted text-uppercase">
        












<span class="glyphicon glyphicon-calendar"></span> <time datetime="2008-07-18T13:09:13+01:00" pubdate data-updated="true">Jul 18<span>th</span>, 2008</time>
        
      </p>
    
    
      <h1 class="entry-title"><a href="/curl/php-curl-curlopt_followlocation-and-open_basedir-or-safe-mode.html">PHP, cURL, CURLOPT FOLLOWLOCATION and Open Basedir or Safe Mode</a></h1>
    
  </header>


  <div class="entry-content clearfix"><div class="oldpost"><h4>This is an old post. The information it contains is probably out of date or innacurate</h4>
<p>
This is a post that was written a long time ago and is only being kept here for posterity.
You should probably look up more recent blog posts related to the subject you are researching
</p>
</div>


<p>If you are trying to get a curl script which needs follow on location functionality to run on a server which has either open_basedir or safe mode enabled you will get an error message similar to the following:</p>

<p><strong>CURLOPT_FOLLOWLOCATION cannot be activated when in safe_mode or an open_basedir is set</strong></p>

<p>After a bit of digging, some kind soul has put a workaround <a href="http://au.php.net/manual/ro/function.curl-setopt.php#71313">here</a></p>

<p>Here is how to use the function</p>

<figure class='code panel panel-default'><figcaption class='panel-heading'><h3 class='panel-title'></h3></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
<span class='line-number'>64</span>
<span class='line-number'>65</span>
<span class='line-number'>66</span>
<span class='line-number'>67</span>
<span class='line-number'>68</span>
<span class='line-number'>69</span>
<span class='line-number'>70</span>
<span class='line-number'>71</span>
<span class='line-number'>72</span>
<span class='line-number'>73</span>
<span class='line-number'>74</span>
<span class='line-number'>75</span>
<span class='line-number'>76</span>
<span class='line-number'>77</span>
<span class='line-number'>78</span>
<span class='line-number'>79</span>
<span class='line-number'>80</span>
<span class='line-number'>81</span>
<span class='line-number'>82</span>
<span class='line-number'>83</span>
<span class='line-number'>84</span>
<span class='line-number'>85</span>
<span class='line-number'>86</span>
<span class='line-number'>87</span>
<span class='line-number'>88</span>
<span class='line-number'>89</span>
<span class='line-number'>90</span>
<span class='line-number'>91</span>
<span class='line-number'>92</span>
<span class='line-number'>93</span>
<span class='line-number'>94</span>
<span class='line-number'>95</span>
<span class='line-number'>96</span>
<span class='line-number'>97</span>
<span class='line-number'>98</span>
<span class='line-number'>99</span>
<span class='line-number'>100</span>
<span class='line-number'>101</span>
<span class='line-number'>102</span>
</pre></td><td class='code'><pre><code class='php'><span class='line'><span class="k">function</span> <span class="nf">curl</span><span class="p">(</span><span class="nv">$url</span><span class="p">){</span>
</span><span class='line'><span class="nv">$go</span> <span class="o">=</span> <span class="nb">curl_init</span><span class="p">(</span><span class="nv">$url</span><span class="p">);</span>
</span><span class='line'><span class="nb">curl_setopt</span> <span class="p">(</span><span class="nv">$go</span><span class="p">,</span> <span class="nx">CURLOPT_URL</span><span class="p">,</span> <span class="nv">$url</span><span class="p">);</span>
</span><span class='line'><span class="c1">//follow on location problems</span>
</span><span class='line'>
</span><span class='line'><span class="k">if</span> <span class="p">(</span><span class="nb">ini_get</span><span class="p">(</span><span class="s1">&#39;open_basedir&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="s1">&#39;&#39;</span> <span class="o">&amp;&amp;</span> <span class="nb">ini_get</span><span class="p">(</span><span class="s1">&#39;safe_mode&#39;</span> <span class="o">==</span> <span class="s1">&#39;Off&#39;</span><span class="p">)){</span>
</span><span class='line'>
</span><span class='line'><span class="nb">curl_setopt</span> <span class="p">(</span><span class="nv">$go</span><span class="p">,</span> <span class="nx">CURLOPT_FOLLOWLOCATION</span><span class="p">,</span> <span class="nv">$l</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'><span class="nv">$syn</span> <span class="o">=</span> <span class="nb">curl_exec</span><span class="p">(</span><span class="nv">$go</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'><span class="p">}</span><span class="k">else</span><span class="p">{</span>
</span><span class='line'>
</span><span class='line'><span class="nv">$syn</span> <span class="o">=</span> <span class="nx">curl_redir_exec</span><span class="p">(</span><span class="nv">$go</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="nb">curl_close</span><span class="p">(</span><span class="nv">$go</span><span class="p">);</span>
</span><span class='line'><span class="k">return</span> <span class="nv">$syn</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="c1">//follow on location problems workaround</span>
</span><span class='line'>
</span><span class='line'><span class="k">function</span> <span class="nf">curl_redir_exec</span><span class="p">(</span><span class="nv">$ch</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>
</span><span class='line'><span class="k">static</span> <span class="nv">$curl_loops</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="k">static</span> <span class="nv">$curl_max_loops</span> <span class="o">=</span> <span class="mi">20</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="k">if</span> <span class="p">(</span><span class="nv">$curl_loops</span><span class="o">++</span> <span class="o">&gt;=</span> <span class="nv">$curl_max_loops</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>
</span><span class='line'><span class="nv">$curl_loops</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="k">return</span> <span class="k">FALSE</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_HEADER</span><span class="p">,</span> <span class="k">true</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'><span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_RETURNTRANSFER</span><span class="p">,</span> <span class="k">true</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'><span class="nv">$data</span> <span class="o">=</span> <span class="nb">curl_exec</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'><span class="k">list</span><span class="p">(</span><span class="nv">$header</span><span class="p">,</span> <span class="nv">$data</span><span class="p">)</span> <span class="o">=</span> <span class="nb">explode</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="nv">$data</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'><span class="nv">$http_code</span> <span class="o">=</span> <span class="nb">curl_getinfo</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLINFO_HTTP_CODE</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'><span class="k">if</span> <span class="p">(</span><span class="nv">$http_code</span> <span class="o">==</span> <span class="mi">301</span> <span class="o">||</span> <span class="nv">$http_code</span> <span class="o">==</span> <span class="mi">302</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>
</span><span class='line'><span class="nv">$matches</span> <span class="o">=</span> <span class="k">array</span><span class="p">();</span>
</span><span class='line'>
</span><span class='line'><span class="nb">preg_match</span><span class="p">(</span><span class="s1">&#39;/Location:(.*?)\n/&#39;</span><span class="p">,</span> <span class="nv">$header</span><span class="p">,</span> <span class="nv">$matches</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'><span class="nv">$url</span> <span class="o">=</span> <span class="o">@</span><span class="nb">parse_url</span><span class="p">(</span><span class="nx">trim</span><span class="p">(</span><span class="nb">array_pop</span><span class="p">(</span><span class="nv">$matches</span><span class="p">)));</span>
</span><span class='line'>
</span><span class='line'><span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nv">$url</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>
</span><span class='line'><span class="c1">//couldn&#39;t process the url to redirect to</span>
</span><span class='line'>
</span><span class='line'><span class="nv">$curl_loops</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="k">return</span> <span class="nv">$data</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="nv">$last_url</span> <span class="o">=</span> <span class="nb">parse_url</span><span class="p">(</span><span class="nb">curl_getinfo</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLINFO_EFFECTIVE_URL</span><span class="p">));</span>
</span><span class='line'>
</span><span class='line'><span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nv">$url</span><span class="p">[</span><span class="s1">&#39;scheme&#39;</span><span class="p">])</span>
</span><span class='line'>
</span><span class='line'><span class="nv">$url</span><span class="p">[</span><span class="s1">&#39;scheme&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$last_url</span><span class="p">[</span><span class="s1">&#39;scheme&#39;</span><span class="p">];</span>
</span><span class='line'>
</span><span class='line'><span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nv">$url</span><span class="p">[</span><span class="s1">&#39;host&#39;</span><span class="p">])</span>
</span><span class='line'>
</span><span class='line'><span class="nv">$url</span><span class="p">[</span><span class="s1">&#39;host&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$last_url</span><span class="p">[</span><span class="s1">&#39;host&#39;</span><span class="p">];</span>
</span><span class='line'>
</span><span class='line'><span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nv">$url</span><span class="p">[</span><span class="s1">&#39;path&#39;</span><span class="p">])</span>
</span><span class='line'>
</span><span class='line'><span class="nv">$url</span><span class="p">[</span><span class="s1">&#39;path&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$last_url</span><span class="p">[</span><span class="s1">&#39;path&#39;</span><span class="p">];</span>
</span><span class='line'>
</span><span class='line'><span class="nv">$new_url</span> <span class="o">=</span> <span class="nv">$url</span><span class="p">[</span><span class="s1">&#39;scheme&#39;</span><span class="p">]</span> <span class="o">.</span> <span class="s1">&#39;://&#39;</span> <span class="o">.</span> <span class="nv">$url</span><span class="p">[</span><span class="s1">&#39;host&#39;</span><span class="p">]</span> <span class="o">.</span> <span class="nv">$url</span><span class="p">[</span><span class="s1">&#39;path&#39;</span><span class="p">]</span> <span class="o">.</span> <span class="p">(</span><span class="nv">$url</span><span class="p">[</span><span class="s1">&#39;query&#39;</span><span class="p">]</span><span class="o">?</span><span class="s1">&#39;?&#39;</span><span class="o">.</span><span class="nv">$url</span><span class="p">[</span><span class="s1">&#39;query&#39;</span><span class="p">]</span><span class="o">:</span><span class="s1">&#39;&#39;</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'><span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_URL</span><span class="p">,</span> <span class="nv">$new_url</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'><span class="k">return</span> <span class="nx">curl_redir_exec</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'><span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span><span class='line'>
</span><span class='line'><span class="nv">$curl_loops</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="k">return</span> <span class="nv">$data</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>

</div>
  
  


        </article>
      
      
        <article class="post">
          
  <header class="page-header">
    
      <p class="meta text-muted text-uppercase">
        












<span class="glyphicon glyphicon-calendar"></span> <time datetime="2008-07-18T10:40:19+01:00" pubdate data-updated="true">Jul 18<span>th</span>, 2008</time>
        
      </p>
    
    
      <h1 class="entry-title"><a href="/regular%20expressions/regular-expression-test-tool.html">Regular Expression Test Tool</a></h1>
    
  </header>


  <div class="entry-content clearfix"><div class="oldpost"><h4>This is an old post. The information it contains is probably out of date or innacurate</h4>
<p>
This is a post that was written a long time ago and is only being kept here for posterity.
You should probably look up more recent blog posts related to the subject you are researching
</p>
</div>


<p>Creating regular expressions can sometimes be a frustrating experience. Generally I find using regular expressions intuitive and easy, with quick and powerful results. However every now and then you stumble into a regular expression scenario that you just can&rsquo;t seem to crack.</p>

<p>When this happens you might find yourself trying and trying different regular expressions and then echoing out the results and trying to figure out what is going wrong.</p>

<p>At times like this, a regular expression testing tool is invaluable. If like me though you don&rsquo;t really like to shell out on something that you are probably hardly ever going to use then this online <a rel="nofollow" href="http://www.solmetra.lt/scripts/regex/index.php">regular expression tester</a> is great.</p>

<p>Thanks goes out to these guys for hosting such a simple but eminently useful little tool :&ndash;)</p>

<p><b>Further Reading</b></p>

<p><a rel="nofollow" href="http://weblogs.asp.net/rosherove/articles/6863.aspx"><a href="http://weblogs.asp.net">http://weblogs.asp.net</a></a>
<a rel="nofollow" href="http://www.imneebu.com/2007/11/15/matching-a-valid-email-address-with-regular-expressions/"><a href="http://www.imneebu.com/">http://www.imneebu.com/</a></a>
<a rel="nofollow" href="http://openoffice.blogs.com/openoffice/2008/02/how-to-do-regul.html"><a href="http://openoffice.blogs.com/">http://openoffice.blogs.com/</a></a>
<a rel="nofollow" href="http://www.oreillygmt.co.uk/2007/02/review_of_maste.html"><a href="http://www.oreillygmt.co.uk/">http://www.oreillygmt.co.uk/</a></a>
<a rel="nofollow" href="http://spellbook.infinitiv.it/2006/07/12/php-regular-expressions.htm"><a href="http://spellbook.infinitiv.it/">http://spellbook.infinitiv.it/</a></a>
<a rel="nofollow" href="http://www.alexschultz.co.uk/weblog/2007/08/google-analytic.html"><a href="http://www.alexschultz.co.uk/">http://www.alexschultz.co.uk/</a></a>
<a rel="nofollow" href="http://www.colinneller.com/blog/RegExUserGroupTalk.aspx"><a href="http://www.colinneller.com/blog/">http://www.colinneller.com/blog/</a></a>
<a rel="nofollow" href="http://www.embracingchaos.com/2007/04/rhapsody_grease.html"><a href="http://www.embracingchaos.com/">http://www.embracingchaos.com/</a></a>
<a rel="nofollow" href="http://www.hanselman.com/blog/InternationalizedRegularExpressions.aspx"><a href="http://www.hanselman.com/blog/">http://www.hanselman.com/blog/</a></a>
<a rel="nofollow" href="http://www.phpclasses.org/browse/package/3211.html"><a href="http://www.phpclasses.org/browse/package/3211.html">http://www.phpclasses.org/browse/package/3211.html</a></a>
<a rel="nofollow" href="http://www.phpclasses.org/reviews/id/0596514271.html"><a href="http://www.phpclasses.org/reviews/id/0596514271.html">http://www.phpclasses.org/reviews/id/0596514271.html</a></a>
<a rel="nofollow" href="http://blogs.oracle.com/otn/2004/12/sql_regular_expressions_sessio.html"><a href="http://blogs.oracle.com/">http://blogs.oracle.com/</a></a></p>
</div>
  
  


        </article>
      
      
        <article class="post">
          
  <header class="page-header">
    
      <p class="meta text-muted text-uppercase">
        












<span class="glyphicon glyphicon-calendar"></span> <time datetime="2008-07-09T10:21:40+01:00" pubdate data-updated="true">Jul 9<span>th</span>, 2008</time>
        
      </p>
    
    
      <h1 class="entry-title"><a href="/php/excel/php-dead-easy-excel-export.html">PHP : Dead Easy Excel Export</a></h1>
    
  </header>


  <div class="entry-content clearfix"><div class="oldpost"><h4>This is an old post. The information it contains is probably out of date or innacurate</h4>
<p>
This is a post that was written a long time ago and is only being kept here for posterity.
You should probably look up more recent blog posts related to the subject you are researching
</p>
</div>


<p>Some people like their excel files. For people who want their data exported in an excel format checkout this chunk of code. It&rsquo;s really easy :&ndash;)</p>

<p>First of all you need to download this <a href="http://www.phpclasses.org/browse/package/1919.html" title="php excel" target="_blank">php excel class </a></p>

<p>Now try this code:</p>

<figure class='code panel panel-default'><figcaption class='panel-heading'><h3 class='panel-title'></h3></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
</pre></td><td class='code'><pre><code class='php'><span class='line'><span class="nv">$query</span> <span class="o">=</span> <span class="nb">mysql_query</span><span class="p">(</span><span class="s2">&quot;select * from table&quot;</span><span class="p">);</span>
</span><span class='line'><span class="k">while</span><span class="p">(</span><span class="nv">$q</span> <span class="o">=</span> <span class="nb">mysql_fetch_assoc</span><span class="p">(</span><span class="nv">$query</span><span class="p">)){</span>
</span><span class='line'>  <span class="nv">$output</span><span class="p">[]</span> <span class="o">=</span> <span class="nv">$q</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'><span class="k">require_once</span> <span class="s2">&quot;excel.php&quot;</span><span class="p">;</span>
</span><span class='line'><span class="nv">$export_file</span> <span class="o">=</span> <span class="s2">&quot;xlsfile://export.xls&quot;</span><span class="p">;</span>
</span><span class='line'><span class="nv">$fp</span> <span class="o">=</span> <span class="nb">fopen</span><span class="p">(</span><span class="nv">$export_file</span><span class="p">,</span> <span class="s2">&quot;wb&quot;</span><span class="p">);</span>
</span><span class='line'><span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nb">is_resource</span><span class="p">(</span><span class="nv">$fp</span><span class="p">))</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>    <span class="k">die</span><span class="p">(</span><span class="s2">&quot;Cannot open </span><span class="si">$export_file</span><span class="s2">&quot;</span><span class="p">);</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'><span class="nb">fwrite</span><span class="p">(</span><span class="nv">$fp</span><span class="p">,</span> <span class="nb">serialize</span><span class="p">(</span><span class="nv">$output</span><span class="p">));</span>
</span><span class='line'><span class="nb">fclose</span><span class="p">(</span><span class="nv">$fp</span><span class="p">);</span>
</span><span class='line'><span class="nx">header</span> <span class="p">(</span><span class="s2">&quot;Content-Type: application/x-msexcel&quot;</span><span class="p">);</span>
</span><span class='line'><span class="nx">header</span> <span class="p">(</span><span class="s2">&quot;Content-Disposition: attachment; filename=</span><span class="se">\&quot;</span><span class="s2">exports.xls</span><span class="se">\&quot;</span><span class="s2">&quot;</span> <span class="p">);</span>
</span><span class='line'><span class="nb">readfile</span><span class="p">(</span><span class="s2">&quot;xlsfile://export.xls&quot;</span><span class="p">);</span>
</span><span class='line'><span class="k">exit</span><span class="p">;</span>
</span></code></pre></td></tr></table></div></figure>


<p>That&rsquo;s got to be the easiest thing you have ever done in PHP. Thanks goes to the excellent PHP Classes site.</p>

<p><strong>Here is some further reading:</strong>
<a rel="nofollow" href="http://ewbi.blogs.com/develops/2007/05/php_excel_formu.html">PHP Excel Formula Parser</a>
<a rel="nofollow" href="http://chumby.net/2007/03/27/php-excel-export-class/">PHP Excel Export class</a>
<a rel="nofollow" href="http://www.oracleappsblog.com/index.php/weblog/comments/88/">Export data directly to Excel by configuring the MIME Type Profile Option</a>
<a rel="nofollow" href="http://blogs.vinuthomas.com/2008/06/07/power-your-php-business-logic-with-excel/">Power your PHP Business Logic with Excel</a>
<a rel="nofollow" href="http://amiworks.co.in/talk/readingparsing-excel-spreadsheet-using-php/">Reading/Parsing Excel Spreadsheet using PHP</a>
<a rel="nofollow" href="http://jaxn.org/article/2003/11/11/using-php-to-create-excel-spreadsheets/"></a></p>
</div>
  
  


        </article>
      
    </div>

    <ul class="pager">
      
        <li class="previous"><a href="/page/74/">&larr;&nbsp;Older</a></li>
      
      <li><a href="/blog/archives">Blog Archives</a></li>
      
        <li class="next"><a href="/page/72/">Newer&nbsp;&rarr;</a></li>
      
    </ul>
  </div>

  
    <aside class="sidebar col-md-3">
      
        <section class="panel panel-default">
  <div class="panel-heading">
    <h3 class="panel-title">Recent Posts</h3>
  </div>
  
  <div id="recent_posts" class="list-group">
    
    <a class="list-group-item " href="/chrome/trigger-basic-auth-popup-in-chrome.html">Trigger Basic Auth Popup in Chrome</a>
    
    <a class="list-group-item " href="/Symonfy2/symonfy2-phpstorm-project-setup.html">Symonfy2 PHPStorm Project Setup</a>
    
    <a class="list-group-item " href="/vim/octopress-syntax-highlighting-for-vim.html">Octopress Syntax Highlighting for Vim</a>
    
    <a class="list-group-item " href="/phpstorm/ruby/ruby-syntax-highlighting-with-phpstorm.html">Ruby Syntax Highlighting With PHPStorm</a>
    
    <a class="list-group-item " href="/fedora/setting-up-a-fedora-19-based-php-development-installation.html">Setting Up a Fedora 19 Based PHP Development Installation</a>
    
  </div>
</section>




<section class="googleplus panel panel-default">
  <div class="panel-body">
    <h3>
      <a href="https://plus.google.com/104488822194646220248?rel=author">
        <img src="http://www.google.com/images/icons/ui/gprofile_button-32.png" width="32" height="32">
        Google+
      </a>
    </h3>
  </div>
</section>


<section class="panel panel-default">
    <div class="panel-heading">
        <h3 class="panel-title">About Us</h3>
    </div>
    <div class="panel-body">
        <p>
            <a href="http://www.edmondscommerce.co.uk">Edmonds Commerce</a> are a UK based E-Commerce web development
            agency.
        </p>

        <p>
            We are based in <a href="http://www.yorkshire.com/">Yorkshire</a> near <a
                href="http://www.visitleeds.co.uk/">Leeds</a> and <a href="http://www.visitbradford.com/">Bradford</a>.
        </p>

        <p>
            Our primary specialism is <a href="http://magento.com/">Magento</a> and other PHP based E-Commerce platforms
            such as <a href="http://www.opencart.com/">OpenCart</a>.
        </p>

        <p>
            In terms of technology we are very strong in:
        <ul>
            <li><a href="http://php.net/">PHP</a>,</li>
            <li><a href="http://www.mysql.com/">MySQL</a>,</li>
            <li><a href="http://www.linuxfoundation.org/">Linux</a>,</li>
            <li><a href="http://www.w3.org/standards/techs/html#w3c_all">HTML<a/>,</li>
            <li><a href="http://www.w3.org/Style/CSS/Overview.en.html">CSS</a></li>
            <li><a href="http://en.wikipedia.org/wiki/JavaScript">Javascript</a>.</li>
        </ul>
        </p>
    </div>
</section>

<section class="panel panel-default">
    <div class="panel-heading">
        <h3 class="panel-title">Commercial Enquiries</h3>
    </div>
    <div class="panel-body">
        <p>
            If you would like to discuss your project requirements then please get in touch today.
        </p>

        <p>
            <a href="http://www.edmondscommerce.co.uk">www.edmondscommerce.co.uk</a><br/><br/>
            <a href="mailto:info@edmondscommerce.co.uk">info@edmondscommerce.co.uk</a><br/><br/>
            <a href="tel:00441274590036">+44 1274 590036</a>
        </p>
    </div>
</section>

      
    </aside>
  
</div>

        </div>
      </div>
    </div>
    <footer role="contentinfo"><div class="container">
    <p class="text-muted credits">
  Copyright &copy; 2013 - EdmondsCommerce Development Team<br>
  <small>
      <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>,
      <span class="credit">customized with <a href="https://github.com/kAworu/octostrap3">octostrap3</a></span>.
  </small>
</p>

</div>
</footer>
    <script src="/assets/bootstrap/dist/js/bootstrap.min.js"></script>
<script src="/javascripts/modernizr-2.0.js"></script>






  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





  </body>
</html>
